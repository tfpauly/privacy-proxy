<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Communicating Proxy Configurations in Provisioning Domains</title>
<meta content="Tommy Pauly" name="author">
<meta content="Dragana Damjanovic" name="author">
<meta content="Yaroslav Rosomakho" name="author">
<meta content="
       This document defines a mechanism for accessing provisioning domain information
associated with a proxy, such as other proxy URIs that support different protocols
and information about which destinations are accessible using a proxy. 
    " name="description">
<meta content="xml2rfc 3.31.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-intarea-proxy-config-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.31.0
    Python 3.12.12
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.2.1
    Jinja2 3.1.6
    lxml 6.0.2
    platformdirs 4.5.1
    pycountry 24.6.1
    PyYAML 6.0.3
    requests 2.32.5
    wcwidth 0.3.0
-->
<link href="draft-ietf-intarea-proxy-config.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
  border-left: 2px var(--pilcrow-strong) solid;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow, a.pilcrow:focus {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Proxy Configuration PvDs</td>
<td class="right">January 2026</td>
</tr></thead>
<tfoot><tr>
<td class="left">Pauly, et al.</td>
<td class="center">Expires 3 August 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-intarea-proxy-config-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2026-01-30" class="published">30 January 2026</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-08-03">3 August 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Pauly</div>
<div class="org">Apple, Inc.</div>
</div>
<div class="author">
      <div class="author-name">D. Damjanovic</div>
<div class="org">Microsoft</div>
</div>
<div class="author">
      <div class="author-name">Y. Rosomakho</div>
<div class="org">Zscaler</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Communicating Proxy Configurations in Provisioning Domains</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a mechanism for accessing provisioning domain information
associated with a proxy, such as other proxy URIs that support different protocols
and information about which destinations are accessible using a proxy.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Source for this draft and an issue tracker can be found at
  <span><a href="https://github.com/tfpauly/privacy-proxy">https://github.com/tfpauly/privacy-proxy</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 3 August 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2026 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-background" class="internal xref">Background</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-requirements" class="internal xref">Requirements</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-fetching-pvd-additional-inf" class="internal xref">Fetching PvD Additional Information for proxies</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-discovery-via-https-svcb-re" class="internal xref">Discovery via HTTPS/SVCB Records</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-enumerating-proxies-within-" class="internal xref">Enumerating proxies within a PvD</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-proxy-definition-keys" class="internal xref">Proxy definition keys</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-proprietary-keys-in-proxy-c" class="internal xref">Proprietary keys in proxy configurations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-destination-accessibility-i" class="internal xref">Destination accessibility information for proxies</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-destination-rule-keys" class="internal xref">Destination Rule Keys</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-using-destination-rules" class="internal xref">Using Destination Rules</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-proprietary-keys-in-destina" class="internal xref">Proprietary Keys in Destination Rules</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-discovering-proxies-from-ne" class="internal xref">Discovering proxies from network PvDs</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-new-pvd-additional-informat" class="internal xref">New PvD Additional Information key</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a href="#section-7.1.1" class="auto internal xref">7.1.1</a>.  <a href="#name-proxies-key" class="internal xref"><code>proxies</code> Key</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.2">
                    <p id="section-toc.1-1.7.2.1.2.2.1"><a href="#section-7.1.2" class="auto internal xref">7.1.2</a>.  <a href="#name-proxy-match-key" class="internal xref"><code>proxy-match</code> Key</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-new-pvd-proxy-information-r" class="internal xref">New PvD Proxy Information Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-new-pvd-proxy-protocol-regi" class="internal xref">New PvD Proxy Protocol Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-new-pvd-proxy-destination-r" class="internal xref">New PvD Proxy Destination Rule Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-new-dns-svcb-service-parame" class="internal xref">New DNS SVCB Service Parameter Key (SvcParamKey)</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">HTTP proxies that use the CONNECT method defined in <span><a href="https://rfc-editor.org/rfc/rfc9110#section-9.3.6" class="relref">Section 9.3.6</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>
(often referred to as "forward" proxies) allow clients to open connections to
hosts via a proxy. These typically allow for TCP stream proxying, but can also support
UDP proxying <span>[<a href="#CONNECT-UDP" class="cite xref">CONNECT-UDP</a>]</span> and IP packet proxying
<span>[<a href="#CONNECT-IP" class="cite xref">CONNECT-IP</a>]</span>. The locations of these proxies are not just defined as
hostnames and ports, but can use URI templates <span>[<a href="#URITEMPLATE" class="cite xref">URITEMPLATE</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">In order to make use of multiple related proxies, clients need a way to understand
which proxies are associated with one another, and which protocols can be used
to communicate with the proxies.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Client can also benefit from learning about additional information associated with
the proxy to optimize their proxy usage, such knowing that a proxy is configured
to only allow access to a limited set of destinations.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">These improvements to client behavior can be achieved through the use of
Provisioning Domains. Provisioning Domains (PvDs) are defined in <span>[<a href="#PVD" class="cite xref">PVD</a>]</span>
as consistent sets of network configuration information, which can include proxy
configuration details <span><a href="https://rfc-editor.org/rfc/rfc7556#section-2" class="relref">Section 2</a> of [<a href="#PVD" class="cite xref">PVD</a>]</span>. <span><a href="https://rfc-editor.org/rfc/rfc8801#section-4.3" class="relref">Section 4.3</a> of [<a href="#PVDDATA" class="cite xref">PVDDATA</a>]</span> defines a JSON
<span>[<a href="#JSON" class="cite xref">JSON</a>]</span> format for describing Provisioning Domain Additional Information,
which is an extensible dictionary of properties of the Provisioning Domain.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This document defines several mechanisms to use PvDs to help clients understand how
to use proxies:<a href="#section-1-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-6">
<li id="section-1-6.1">
          <p id="section-1-6.1.1">A way to fetch PvD Additional Information associated with a known proxy URI (<a href="#proxy-pvd" class="auto internal xref">Section 2</a>)<a href="#section-1-6.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-1-6.2">
          <p id="section-1-6.2.1">A way to list one or more proxy URIs in a PvD, allowing clients to
learn about other proxy options given a known proxy (<a href="#proxy-enumeration" class="auto internal xref">Section 3</a>).<a href="#section-1-6.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-1-6.3">
          <p id="section-1-6.3.1">A way to define the set of destinations that are accessible through the
proxy (<a href="#destinations" class="auto internal xref">Section 4</a>).<a href="#section-1-6.3.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-1-7">Additionally, this document partly describes how these mechanisms might be used
to discover proxies associated with a network (<a href="#network-proxies" class="auto internal xref">Section 5</a>).<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">Using this mechanism a client can learn that a legacy insecure HTTP proxy that
the client is configured with is also accessible using HTTPS. In this way,
clients can upgrade to a more secure connection to the proxy.<a href="#section-1-8" class="pilcrow">¶</a></p>
<div id="background">
<section id="section-1.1">
        <h3 id="name-background">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-background" class="section-name selfRef">Background</a>
        </h3>
<p id="section-1.1-1">Other non-standard mechanisms for proxy configuration and discovery have been
used historically, some of which are described in <span>[<a href="#RFC3040" class="cite xref">RFC3040</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Proxy Auto Configuration (PAC) files <span><a href="https://rfc-editor.org/rfc/rfc3040#section-6.2" class="relref">Section 6.2</a> of [<a href="#RFC3040" class="cite xref">RFC3040</a>]</span> are Javascript
scripts that take URLs as input and provide an output of a proxy configuration
to use.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">Web Proxy Auto-Discovery Protocol (WPAD) <span><a href="https://rfc-editor.org/rfc/rfc3040#section-6.4" class="relref">Section 6.4</a> of [<a href="#RFC3040" class="cite xref">RFC3040</a>]</span> allows
networks to advertise proxies to use by advertising a PAC file. This solution
squats on DHCP option 252.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">These common (but non-standard) mechanisms only support defining proxies by
hostname and port, and do not support configuring a full URI template
<span>[<a href="#URITEMPLATE" class="cite xref">URITEMPLATE</a>]</span>.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">The mechanisms defined in this document are intended to offer a standard
alternative that works for URI-based proxies and avoids dependencies
on executing Javascript scripts, which are prone to implementation-specific
inconsistencies and can open up security vulnerabilities.<a href="#section-1.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="requirements">
<section id="section-1.2">
        <h3 id="name-requirements">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-requirements" class="section-name selfRef">Requirements</a>
        </h3>
<p id="section-1.2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
"MAY", and "OPTIONAL" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="proxy-pvd">
<section id="section-2">
      <h2 id="name-fetching-pvd-additional-inf">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-fetching-pvd-additional-inf" class="section-name selfRef">Fetching PvD Additional Information for proxies</a>
      </h2>
<p id="section-2-1">This document defines a way to fetch PvD Additional Information associated with
a proxy. This PvD describes the properties of the network accessible through the proxy.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">In order to fetch PvD Additional Information associated with a proxy, a client
issues an HTTP GET request for the well-known PvD URI (".well-known/pvd") as defined in <span><a href="https://rfc-editor.org/rfc/rfc8801#section-4.1" class="relref">Section 4.1</a> of [<a href="#PVDDATA" class="cite xref">PVDDATA</a>]</span>
and the host authority of the proxy. This is applicable for both proxies that are identified
by a host and port only (such as SOCKS proxies and HTTP CONNECT proxies) and proxies
that are identified by a URI or URI template. The fetch MUST use the "https" scheme.
By default, the fetch SHOULD use the standard port for HTTP over TLS (443) and the ".well-known/pvd" path.
However, both the port and the path MAY be overridden by local configuration policy on the client.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">It is not necessary for the client to re‑fetch PvD Additional Information unless
one of the following conditions occurs:<a href="#section-2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-4.1">
          <p id="section-2-4.1.1">The current time is beyond the "expires" value defined in <span><a href="https://rfc-editor.org/rfc/rfc8801#section-4.3" class="relref">Section 4.3</a> of [<a href="#PVDDATA" class="cite xref">PVDDATA</a>]</span><a href="#section-2-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-4.2">
          <p id="section-2-4.2.1">A new Sequence Number for that PvD is received in a Router Advertisement (RA)<a href="#section-2-4.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-5">To avoid synchronized queries toward the server hosting the PvD Additional Information
when an object expires, clients MUST apply a randomized backoff as specified in <span><a href="https://rfc-editor.org/rfc/rfc8801#section-4.1" class="relref">Section 4.1</a> of [<a href="#PVDDATA" class="cite xref">PVDDATA</a>]</span>.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">For example, a client would issue the following request for the PvD associated
with "https://proxy.example.org/masque{?target_host,target_port}":<a href="#section-2-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2-7">
<pre>
:method = GET
:scheme = https
:authority = proxy.example.org
:path = /.well-known/pvd
accept = application/pvd+json
</pre><a href="#section-2-7" class="pilcrow">¶</a>
</div>
<p id="section-2-8">A client would send the same request as above for the PvD
assocated with an HTTP CONNECT proxy on "proxy.example.org:8080".
Note that the client will not make a request to port 8080, but
to port 443.<a href="#section-2-8" class="pilcrow">¶</a></p>
<p id="section-2-9">Note that all proxies that are co-located on the same host share the same PvD
Additional Information. Proxy deployments that need separate PvD configuration properties
SHOULD use different hosts.<a href="#section-2-9" class="pilcrow">¶</a></p>
<p id="section-2-10">PvD Additional Information is required to contain the "identifier", "expires", and
"prefixes" keys. For proxy PvDs as defined in this document, the "identifier" MUST
match the hostname of the HTTP proxy. The "prefixes" array SHOULD be empty by default.<a href="#section-2-10" class="pilcrow">¶</a></p>
<div id="svcparamkey">
<section id="section-2.1">
        <h3 id="name-discovery-via-https-svcb-re">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-discovery-via-https-svcb-re" class="section-name selfRef">Discovery via HTTPS/SVCB Records</a>
        </h3>
<p id="section-2.1-1">To allow clients to determine whether PvD Additional Information is available for a given proxy,
this document defines a new SvcParamKey in HTTPS and SVCB DNS records defined in <span>[<a href="#SVCB-DNS" class="cite xref">SVCB-DNS</a>]</span>.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">Presence of this SvcParamKey, named <code>pvd</code> indicates that the proxy host supports PvD discovery via
the well-known PvD URI ".well-known/pvd" defined in <span><a href="https://rfc-editor.org/rfc/rfc8801#section-4.1" class="relref">Section 4.1</a> of [<a href="#PVDDATA" class="cite xref">PVDDATA</a>]</span>. The presence of this
key in an HTTPS or SVCB record signals that the proxy's PvD Additional Information can be fetched
using the "https" scheme from the proxy host on port 443 using the well-known path. The presentation and
wire-format values for <code>pvd</code> SvcParamKey MUST be empty.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">A client receiving a DNS record like the following:<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.1-4">
<pre>
proxy.example.org. 3600 IN HTTPS 1 . alpn="h3,h2" pvd
</pre><a href="#section-2.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.1-5">can interpret the presence of the pvd key as an indication that it MAY perform a PvD fetch from
"https://proxy.example.org/.well-known/pvd" using HTTP GET method.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.1-6">While this key is particularly useful for detecting proxy configurations when
looking up a DNS record for a known proxy name, this key generically provides
a hint that PvD Additional Information is available, and can be used for use
cases unrelated to proxies.
This marker is advisory; clients MAY still attempt to fetch PvD Additional Information even if
<code>pvd</code> SvcParamKey is not present.<a href="#section-2.1-6" class="pilcrow">¶</a></p>
<p id="section-2.1-7">The <code>pvd</code> SvcParamKey is registered with IANA as described in <a href="#svcparamkey-iana" class="auto internal xref">Section 7.5</a>.<a href="#section-2.1-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="proxy-enumeration">
<section id="section-3">
      <h2 id="name-enumerating-proxies-within-">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-enumerating-proxies-within-" class="section-name selfRef">Enumerating proxies within a PvD</a>
      </h2>
<p id="section-3-1">This document defines a new PvD Additional Information key, <code>proxies</code>, that
is an array of dictionaries, where each dictionary in the array defines
a single proxy that is available as part of the PvD (see <a href="#proxies-key-iana" class="auto internal xref">Section 7.1</a>).
Each proxy is defined by a proxy protocol and a proxy location (i.e., a hostname and port or a URI template
<span>[<a href="#URITEMPLATE" class="cite xref">URITEMPLATE</a>]</span>), along with other optional keys.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">When a PvD that contains the <code>proxies</code> key is fetched from a known proxy
using the method described in <a href="#proxy-pvd" class="auto internal xref">Section 2</a>, the proxies array describes
equivalent proxies (potentially supporting other protocols) that can be used
in addition to the known proxy.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">Such cases are useful for informing clients of related proxies as a discovery
method, with the assumption that the client already is aware of one proxy.
Many historical methods of configuring a proxy only allow configuring
a single FQDN hostname for the proxy. A client can attempt to fetch the
PvD information from the well-known URI to learn the list of complete
URIs that support non-default protocols, such as <span>[<a href="#CONNECT-UDP" class="cite xref">CONNECT-UDP</a>]</span> and
<span>[<a href="#CONNECT-IP" class="cite xref">CONNECT-IP</a>]</span>.<a href="#section-3-3" class="pilcrow">¶</a></p>
<div id="proxy-definition-keys">
<section id="section-3.1">
        <h3 id="name-proxy-definition-keys">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-proxy-definition-keys" class="section-name selfRef">Proxy definition keys</a>
        </h3>
<p id="section-3.1-1">This document defines two required keys for the sub-dictionaries in the
<code>proxies</code> array: <code>protocol</code> and <code>proxy</code>. There are also optional keys, including
<code>mandatory</code>, <code>alpn</code>, and <code>identifier</code>. Other optional keys can be added to the
dictionary to further define or restrict the use of a proxy. The keys
are registered with IANA as described in <a href="#proxy-info-iana" class="auto internal xref">Section 7.2</a>, with the initial
content provided below.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span id="name-initial-proxy-information-p"></span><div id="proxy-information-keys-table">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-initial-proxy-information-p" class="selfRef">Initial Proxy Information PvD Keys Registry Contents</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">JSON Key</th>
              <th class="text-left" rowspan="1" colspan="1">Optional</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Type</th>
              <th class="text-left" rowspan="1" colspan="1">Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">protocol</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">The protocol used to communicate with the proxy</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
              <td class="text-left" rowspan="1" colspan="1">"connect-udp"</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">proxy</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">String containing the URI template or host and port of the proxy, depending on the format defined by the protocol</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
              <td class="text-left" rowspan="1" colspan="1">"https://example.org:4443/masque/<br>{?target_host,target_port}"</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">mandatory</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">An array of optional keys that client must understand and process to use this proxy</td>
              <td class="text-left" rowspan="1" colspan="1">Array of Strings</td>
              <td class="text-left" rowspan="1" colspan="1">["example_key"]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">alpn</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">An array of Application-Layer Protocol Negotiation protocol identifiers</td>
              <td class="text-left" rowspan="1" colspan="1">Array of Strings</td>
              <td class="text-left" rowspan="1" colspan="1">["h3","h2"]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">identifier</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">A string used to refer to the proxy, which can be referenced by other dictionaries, such as entries in <code>proxy-match</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
              <td class="text-left" rowspan="1" colspan="1">"udp-proxy"</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-3.1-3">The values for the <code>protocol</code> key are defined in the proxy protocol
registry (<a href="#proxy-protocol-iana" class="auto internal xref">Section 7.3</a>), with the initial contents provided below.
For consistency, any new proxy types that use HTTP Upgrade Tokens (and use
the <code>:protocol</code> pseudo-header) SHOULD define the <code>protocol</code> value to match
the Upgrade Token / <code>:protocol</code> value. Extensions to proxy types that use
the same HTTP Upgrade Tokens ought to be covered by the same <code>protocol</code> value;
if there are properties specific to an extension, the extensions can either
define new optional keys or rely on negotation within the protocol to discover
support.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<span id="name-initial-pvd-proxy-protocol-"></span><div id="proxy-protocol-value-table">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-initial-pvd-proxy-protocol-" class="selfRef">Initial PvD Proxy Protocol Registry Contents</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Proxy Protocol</th>
              <th class="text-left" rowspan="1" colspan="1">Proxy Location Format</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
              <th class="text-left" rowspan="1" colspan="1">Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">socks5</td>
              <td class="text-left" rowspan="1" colspan="1">host:port</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#SOCKSv5" class="cite xref">SOCKSv5</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1"> </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">http-connect</td>
              <td class="text-left" rowspan="1" colspan="1">host:port</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="https://rfc-editor.org/rfc/rfc9110#section-9.3.6" class="relref">Section 9.3.6</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1">Standard CONNECT method, using unencrypted HTTP to the proxy</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">https-connect</td>
              <td class="text-left" rowspan="1" colspan="1">host:port</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="https://rfc-editor.org/rfc/rfc9110#section-9.3.6" class="relref">Section 9.3.6</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1">Standard CONNECT method, using TLS-protected HTTP to the proxy</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">connect-udp</td>
              <td class="text-left" rowspan="1" colspan="1">URI template</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#CONNECT-UDP" class="cite xref">CONNECT-UDP</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1"> </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">connect-ip</td>
              <td class="text-left" rowspan="1" colspan="1">URI template</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#CONNECT-IP" class="cite xref">CONNECT-IP</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1"> </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">connect-tcp</td>
              <td class="text-left" rowspan="1" colspan="1">URI template</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#CONNECT-TCP" class="cite xref">CONNECT-TCP</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1"> </td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-3.1-5">The value of <code>proxy</code> depends on the Proxy Location Format defined by proxy protocol.
The types defined here either use a host as defined in <span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.2.2" class="relref">Section 3.2.2</a> of [<a href="#URI" class="cite xref">URI</a>]</span> and port,
or a full URI template.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1-6">The value of the <code>mandatory</code> key is an array of keys that the client must understand and process to be
able to use the proxy. A client that does not understand a key from the array or cannot fully process
the value of a key from the array MUST ignore the entire proxy definition.<a href="#section-3.1-6" class="pilcrow">¶</a></p>
<p id="section-3.1-7">The <code>mandatory</code> array can contain keys that are either:<a href="#section-3.1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-8.1">
            <p id="section-3.1-8.1.1">registered in an IANA registry, defined in <a href="#proxy-info-iana" class="auto internal xref">Section 7.2</a> and marked as optional;<a href="#section-3.1-8.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-8.2">
            <p id="section-3.1-8.2.1">or proprietary, as defined in <a href="#proxy-proprietary-keys" class="auto internal xref">Section 3.2</a><a href="#section-3.1-8.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.1-9">The <code>mandatory</code> array MUST NOT include any entries that are not present in the sub-dictionary.<a href="#section-3.1-9" class="pilcrow">¶</a></p>
<p id="section-3.1-10">If the <code>alpn</code> key is present, it provides a hint for the Application-Layer Protocol Negotiation
(ALPN) <span>[<a href="#ALPN" class="cite xref">ALPN</a>]</span> protocol identifiers associated with this server. For HTTP proxies,
this can indicate if the proxy supports HTTP/3, HTTP/2, etc.<a href="#section-3.1-10" class="pilcrow">¶</a></p>
<p id="section-3.1-11">The value of <code>identifier</code> key is a string that can be used to refer to a particular
proxy from other dictionaries, specifically those defined in <a href="#destinations" class="auto internal xref">Section 4</a>. The
string value is an arbitrary non-empty JSON string using UTF-8 encoding
as discussed in <span><a href="https://rfc-editor.org/rfc/rfc8259#section-8.1" class="relref">Section 8.1</a> of [<a href="#JSON" class="cite xref">JSON</a>]</span>. Characters that need to be escaped in JSON strings
per <span><a href="https://rfc-editor.org/rfc/rfc8259#section-7" class="relref">Section 7</a> of [<a href="#JSON" class="cite xref">JSON</a>]</span> are NOT RECOMMENDED as they can lead to difficulties in
string comparisions as discussed in <span><a href="https://rfc-editor.org/rfc/rfc8259#section-8.3" class="relref">Section 8.3</a> of [<a href="#JSON" class="cite xref">JSON</a>]</span>. Identifier values MAY be duplicated
across different proxy dictionaries in the <code>proxies</code> array, which indicates
that all references from other dictionaries to a particular identifier value apply
to all matching proxies. Proxies without the <code>identifier</code> key are expected to accept any
traffic since their destinations cannot be contained in <code>proxy-match</code> array defined
in <a href="#destinations" class="auto internal xref">Section 4</a>. Proxies with <code>identifier</code> keys are expected to accept only traffic
matching rules in the <code>proxy-match</code> array and SHOULD NOT be used if they are not included in
the <code>proxy-match</code> array.<a href="#section-3.1-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="proxy-proprietary-keys">
<section id="section-3.2">
        <h3 id="name-proprietary-keys-in-proxy-c">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-proprietary-keys-in-proxy-c" class="section-name selfRef">Proprietary keys in proxy configurations</a>
        </h3>
<p id="section-3.2-1">Implementations MAY include proprietary or vendor-specific keys in the sub-dictionaries of the <code>proxies</code>
array to convey additional proxy configuration information not defined in this specification.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">A proprietary key MUST contain at least one underscore character ("_"). The last underscore serves as a
separator between a vendor-specific namespace and the key name. For example, "acme_tech_authmode" could
be a proprietary key indicating an authentication mode defined by a vendor named "acme_tech".<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">When combined with <code>mandatory</code> array, this mechanism allows implementations to extend proxy metadata while
maintaining interoperability and ensuring safe fallback behavior for clients that do not support a given
extension.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="example">
<section id="section-3.3">
        <h3 id="name-example">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-example" class="section-name selfRef">Example</a>
        </h3>
<p id="section-3.3-1">Given a known HTTP CONNECT proxy FQDN, "proxy.example.org", a client could
request PvD Additional Information with the following request:<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3-2">
<pre>
:method = GET
:scheme = https
:authority = proxy.example.org
:path = /.well-known/pvd
accept = application/pvd+json
</pre><a href="#section-3.3-2" class="pilcrow">¶</a>
</div>
<p id="section-3.3-3">If the proxy has a PvD definition for this FQDN, it would return the following
response to indicate a PvD that has two related proxy URIs.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3-4">
<pre>
:status = 200
content-type = application/pvd+json
content-length = 322

{
  "identifier": "proxy.example.org.",
  "expires": "2023-06-23T06:00:00Z",
  "prefixes": [],
  "proxies": [
    {
      "protocol": "http-connect",
      "proxy": "proxy.example.org:80"
    },
    {
      "protocol": "connect-udp",
      "proxy": "https://proxy.example.org/masque{?target_host,target_port}"
    }
  ]
}
</pre><a href="#section-3.3-4" class="pilcrow">¶</a>
</div>
<p id="section-3.3-5">From this response, the client would learn the URI template of the proxy that supports UDP using <span>[<a href="#CONNECT-UDP" class="cite xref">CONNECT-UDP</a>]</span>,
at "https://proxy.example.org/masque{?target_host,target_port}".<a href="#section-3.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="destinations">
<section id="section-4">
      <h2 id="name-destination-accessibility-i">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-destination-accessibility-i" class="section-name selfRef">Destination accessibility information for proxies</a>
      </h2>
<p id="section-4-1">Destination accessibility information is used when only a subset of destinations is reachable through
a proxy. Destination restrictions are often used in VPN tunnel configurations such as split
DNS in IKEv2 <span>[<a href="#IKEV2SPLIT" class="cite xref">IKEV2SPLIT</a>]</span>, and in other proxy configuration mechanisms like PAC files (see <a href="#background" class="auto internal xref">Section 1.1</a>).<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">PvD Additional Information can be used to indicate that a set of proxies only allows access to
a limited set of destinations.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">To support determining which traffic is supported by different proxies, this document defines
a new PvD Additional Information key <code>proxy-match</code>. This key has a value that is an array of
dictionaries, where each subdictionary describes a rule for matching traffic to one or more
proxies, or excluding the traffic from all proxies described in the PvD. These subdictionaries are referred
to as "destination rules", since they define rules about which destinations can be accessed
for a particular proxy or set of proxies.<a href="#section-4-3" class="pilcrow">¶</a></p>
<div id="destination-rule-keys">
<section id="section-4.1">
        <h3 id="name-destination-rule-keys">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-destination-rule-keys" class="section-name selfRef">Destination Rule Keys</a>
        </h3>
<p id="section-4.1-1">This document defines four keys for destination rules. Any destination rule MUST contain
the <code>proxies</code> key. Values corresponding to the <code>proxies</code> key may be either an empty array,
which implies that no proxy defined in this PvD can process matching traffic, or an array of strings
with at least one proxy <code>identifier</code> string. All destination rules MUST also contain at least one
other key use to describe the destination properties. Each key MUST correspond to an array
with at least one entry.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Extensions or proprietary deployments can define new keys to describe destination properties.
Any destination rules that include keys not known to the client, or values that cannot be
parsed, MUST be ignored in their entirety.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">Destination rule keys are registered with IANA as defined in <a href="#proxy-destination-iana" class="auto internal xref">Section 7.4</a>,
with the initial content provided below.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<span id="name-initial-pvd-proxy-destinati"></span><div id="destination-rule-keys-table">
<table class="center" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-initial-pvd-proxy-destinati" class="selfRef">Initial PvD Proxy Destination Rule Registry Contents</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">JSON Key</th>
              <th class="text-left" rowspan="1" colspan="1">Optional</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Type</th>
              <th class="text-left" rowspan="1" colspan="1">Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">proxies</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">An array of strings that match <code>identifier</code> values from the top-level <code>proxies</code> array</td>
              <td class="text-left" rowspan="1" colspan="1">Array of Strings</td>
              <td class="text-left" rowspan="1" colspan="1">["tcp-proxy", "udp-proxy"]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">domains</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">An array of FQDNs and wildcard DNS domains</td>
              <td class="text-left" rowspan="1" colspan="1">Array of Strings</td>
              <td class="text-left" rowspan="1" colspan="1">["www.example.com", "*.internal.example.com"]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">subnets</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">An array of IPv4 and IPv6 addresses and subnets</td>
              <td class="text-left" rowspan="1" colspan="1">Array of Strings</td>
              <td class="text-left" rowspan="1" colspan="1">["2001:DB8::1", "192.0.2.0/24"]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ports</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">An array of TCP and UDP port ranges</td>
              <td class="text-left" rowspan="1" colspan="1">Array of Strings</td>
              <td class="text-left" rowspan="1" colspan="1">["80", "443", "1024-65535"]</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-4.1-5">The <code>domains</code> array includes specific FQDNs and zones that are either accessible using specific proxy (for
rules with non-empty <code>proxies</code> array) or non-accessible through any proxies (for rules with empty <code>proxies</code> array).
Wildcards are allowed only as prefixes (<code>*.</code>). A wildcard prefix is used to indicate matching entire domains or subdomains instead of
specific hostnames. Note that this can be used to match multiple levels of subdomains. For example "*.example.com"
matches "internal.example.com" as well as "www.public.example.com".
Entries that include the wildcard prefix also MUST be treated as if they match
an FQDN that only contains the string after the prefix, with no subdomain. So,
an entry "*.example.com" in the <code>domains</code> array of a <code>proxy-match</code> rule would match the FQDN "example.com".
This is done to prevent commonly needing to include both "*.example.com" and "example.com"
in the <code>domains</code> array of a <code>proxy-match</code> rule.
Matches are performed against absolute domain names, independent of the client's configured DNS search suffixes.
Clients MUST NOT apply local DNS suffix search rules when interpreting <code>domains</code> entries. A trailing dot (".")
at the end of a domain name is not required; the matching logic is the same regardless of its presence or absence.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">The <code>subnets</code> array includes IPv4 and IPv6 address literals, as well as IPv4 and IPv6 address subnets
written using CIDR notation <span>[<a href="#CIDR" class="cite xref">CIDR</a>]</span>. Subnet-based destination information can apply to cases where
applications are communicating directly with an IP address (without having resolved a DNS name)
as well as cases where an application resolved a DNS name to a set of IP addresses. Note that
if destination rules includes an empty <code>proxies</code> array (indicating that no proxy is applicable for
this subnet), an application can only reliably follow this destination rule if it resolves DNS
names prior to proxying.<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<p id="section-4.1-7">The <code>ports</code> array includes specific ports (used for matching TCP and/or UDP ports), as well as
ranges of ports written with a low port value and a high port value, with a <code>-</code> in between.
For example, "1024-2048" matches all ports from 1024 to 2048, including the 1024 and 2048.
If <code>ports</code> key is not present, all ports are assumed to match. The array may
contain individual port numbers (such as "80") or inclusive ranges of ports. For example
"1024-2048" matches all ports from 1024 to 2048, including the 1024 and 2048.<a href="#section-4.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="using-destination-rules">
<section id="section-4.2">
        <h3 id="name-using-destination-rules">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-using-destination-rules" class="section-name selfRef">Using Destination Rules</a>
        </h3>
<p id="section-4.2-1">The destination rules can be used to determine which traffic can be sent through proxies, and
which specific set of proxies to use for any particular connection. By evaluating the rules in
order, a consistent behavior for usage can be achieved.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Rules in the <code>proxy-match</code> array are provided in order of priority, such that a client
can evaluate the rules from the first in the array to the last in the array, and attempt
using the matching proxy or proxies from the earliest matching rule first. If earliest matching
rule has empty array of <code>proxies</code> client SHOULD NOT send matching traffic to any proxy defined
in this PvD.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">In order to match a destination rule in the <code>proxy-match</code> array, all properties MUST apply. For
example, if a destination rule includes a <code>domains</code> array and a <code>ports</code> array, traffic that matches
the rule needs to match at least one of the entries in the <code>domains</code> array and one of the entries in the
<code>ports</code> array. In addition, a destination rule is considered a match only if at least one of the
associated proxy identifiers supports the protocol required by the connection attempt (for
example, <code>connect-udp</code> for UDP traffic). If no listed proxy identifier is applicable to the protocol,
the rule MUST be treated as not matching, and the client continues evaluation of subsequent rules.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">A matched rule will then either point to one or more proxy <code>identifier</code> values, which correspond
to proxies defined in the array from <a href="#proxy-enumeration" class="auto internal xref">Section 3</a>, or instructs the client to not send the
matching traffic to any proxy. If a matching rule contains more then one <code>identifier</code> the client
should treat the array as an ordered list, where the first <code>identifier</code> is the most preferred.
Multiple proxy dictionaries can contain the same <code>identifier</code> value. In this case, the client
can choose any of the proxies; however, the client ought to prefer using the same proxy for the consecutive requests
to the same proxy <code>identifier</code> to increase connection reuse.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">Entries listed in a <code>proxy-match</code> object MUST NOT expand the set of destinations that a client is
willing to send to a particular proxy. The array can only narrow the set of destinations
that the client is willing to send through the proxy. For example, if the client
has a local policy to only send requests for "*.example.com" to a proxy
"proxy.example.com", and <code>domains</code> array of a <code>match</code> object contains "internal.example.com" and
"other.company.com", the client would end up only proxying "internal.example.com"
through the proxy.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="proprietary-keys-in-destination-rules">
<section id="section-4.3">
        <h3 id="name-proprietary-keys-in-destina">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-proprietary-keys-in-destina" class="section-name selfRef">Proprietary Keys in Destination Rules</a>
        </h3>
<p id="section-4.3-1">Implementations MAY include proprietary or vendor-specific keys in destination rules to define custom matching logic
not specified in this document.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">Similar to proprietary keys in proxy definitions (<a href="#proxy-proprietary-keys" class="auto internal xref">Section 3.2</a>), a proprietary key in destination
rule MUST contain at least one underscore character ("_"), which separates a vendor-specific namespace from the key name.
For example, "acme_processid" could be a key used to apply rules only to traffic of a specific process identifier as
defined by a vendor named "acme".<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">Clients that encounter a proprietary key they do not recognize MUST ignore the entire destination rule in which the
key appears. This ensures that unknown or unsupported matching logic does not inadvertently influence proxy selection
or bypass security controls. This handling applies uniformly across all match rules, including fallback rules.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="examples">
<section id="section-4.4">
        <h3 id="name-examples">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
        </h3>
<p id="section-4.4-1">In the following example, two proxies are defined with a common identifier ("default_proxy"), with
a single destination rule for "*.internal.example.org".<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.4-2">
<pre>
{
  "identifier": "proxy.example.org.",
  "expires": "2023-06-23T06:00:00Z",
  "prefixes": [],
  "proxies": [
    {
      "protocol": "http-connect",
      "proxy": "proxy.example.org:80",
      "identifier": "default_proxy"
    },
    {
      "protocol": "http-connect",
      "proxy": "proxy2.example.org:80",
      "identifier": "default_proxy"
    }
  ],
  "proxy-match": [
    {
      "domains": [ "*.internal.example.org" ],
      "proxies": [ "default_proxy" ]
    }
  ]
}
</pre><a href="#section-4.4-2" class="pilcrow">¶</a>
</div>
<p id="section-4.4-3">The client could then choose to use either proxy associated with the "default_proxy" identifier
for accessing TCP hosts that fall within the "*.internal.example.org" zone. This would include the
hostnames "internal.example.org", "foo.internal.example.org", "www.bar.internal.example.org" and
all other hosts within "internal.example.org". The client will use the same proxy for the following
requests to hosts falling into the "*.internal.example.org" zone to increase connection reuse and make
use of the connection resumption. The client will not use the proxies defined in this configuration
to hosts outside of the "*.internal.example.org" zone.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.4-4">In the next example, two proxies are defined with a separate identifiers, and there are
three destination rules:<a href="#section-4.4-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.4-5">
<pre>
{
  "identifier": "proxy.example.org.",
  "expires": "2023-06-23T06:00:00Z",
  "prefixes": [],
  "proxies": [
    {
      "protocol": "http-connect",
      "proxy": "proxy.example.org:80",
      "identifier": "default_proxy"
    },
    {
      "protocol": "http-connect",
      "proxy": "special-proxy.example.org:80",
      "identifier": "special_proxy"
    }
  ],
  "proxy-match": [
    {
      "domains": [ "*.special.example.org" ],
      "ports": [ "80", "443", "49152-65535" ],
      "proxies": [ "special_proxy" ]
    },
    {
      "domains": [ "no-proxy.internal.example.org" ],
      "proxies": [ ]
    },
    {
      "domains": [ "*.internal.example.org" ],
      "proxies": [ "default_proxy" ]
    }
  ]
}
</pre><a href="#section-4.4-5" class="pilcrow">¶</a>
</div>
<p id="section-4.4-6">In this case, the client would use "special-proxy.example.org:80"
for any TCP traffic that matches "*.special.example.org" destined to ports 80, 443 or any port between
49152 and 65535. The client would not use any of the defined proxies for access to
"no-proxy.internal.example.org". And finally, the client would use
"proxy.example.org:80" to access any other TCP traffic that matches
"*.internal.example.org".<a href="#section-4.4-6" class="pilcrow">¶</a></p>
<p id="section-4.4-7">In the following example, three proxies are sharing a common identifier ("default-proxy"), but use
separate protocols constraining the traffic that they can process.<a href="#section-4.4-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.4-8">
<pre>
{
  "identifier": "proxy.example.org.",
  "expires": "2023-06-23T06:00:00Z",
  "prefixes": [],
  "proxies": [
    {
      "protocol": "http-connect",
      "proxy": "proxy.example.org:80",
      "identifier": "default_proxy"
    },
    {
      "protocol": "connect-udp",
      "proxy": "https://proxy.example.org/masque/udp/{target_host},{target_port}",
      "identifier": "default_proxy"
    },
    {
      "protocol": "connect-ip",
      "proxy": "https://proxy.example.org/masque/ip{?target,ipproto}",
      "identifier": "default_proxy"
    }
  ],
  "proxy-match": [
    {
      "domains": [ "*.internal.example.org" ],
      "proxies": [ "default_proxy" ]
    }
  ]
}
</pre><a href="#section-4.4-8" class="pilcrow">¶</a>
</div>
<p id="section-4.4-9">The client would use proxies in the following way:<a href="#section-4.4-9" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4-10.1">
            <p id="section-4.4-10.1.1">Traffic not destined to hosts within the "*.internal.example.org" zone is not sent
to any proxy defined in this configuration<a href="#section-4.4-10.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.4-10.2">
            <p id="section-4.4-10.2.1">TCP traffic destined to hosts within the "*.internal.example.org" zone is sent
either to the proxy with "http-connect" protocol or to the proxy with "connect-ip" protocol<a href="#section-4.4-10.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.4-10.3">
            <p id="section-4.4-10.3.1">UDP traffic destined to hosts within the "*.internal.example.org" zone is sent
either to the proxy with "connect-udp" protocol or to the proxy with "connect-ip" protocol<a href="#section-4.4-10.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.4-10.4">
            <p id="section-4.4-10.4.1">Traffic other than TCP and UDP destined to hosts within the "*.internal.example.org" zone is sent
to the proxy with "connect-ip" protocol<a href="#section-4.4-10.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-4.4-11">The following example provides a configuration of proxies to be used by default with a
set with exceptions to bypass:<a href="#section-4.4-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.4-12">
<pre>
{
  "identifier": "proxy.example.org.",
  "expires": "2023-06-23T06:00:00Z",
  "prefixes": [],
  "proxies": [
    {
      "protocol": "http-connect",
      "proxy": "proxy.example.org:80",
      "identifier": "default_proxy"
    },
    {
      "protocol": "http-connect",
      "proxy": "backup.example.org:80",
      "identifier": "secondary_proxy"
    }
  ],
  "proxy-match": [
    {
      "domains": [ "*.intranet.example.org" ],
      "proxies": [ ]
    },
    {
      "subnets": [ "192.0.2.0/24", "2001:DB8::/32" ],
      "proxies": [ ]
    },
    {
      "proxies": [ "default_proxy", "secondary_proxy" ]
    }
  ]
}
</pre><a href="#section-4.4-12" class="pilcrow">¶</a>
</div>
<p id="section-4.4-13">In this case, the client will not forward TCP traffic that is destined to hosts matching
"*.intranet.example.org", 192.0.2.0/24 or 2001:DB8::/32, through the proxies.
Due to the order in "proxies" array in the last rule of "proxy-match", the client would prefer
"proxy.example.org:80" over "backup.example.org:80"<a href="#section-4.4-13" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="network-proxies">
<section id="section-5">
      <h2 id="name-discovering-proxies-from-ne">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-discovering-proxies-from-ne" class="section-name selfRef">Discovering proxies from network PvDs</a>
      </h2>
<p id="section-5-1"><span>[<a href="#PVDDATA" class="cite xref">PVDDATA</a>]</span> defines how PvD Additional Information is discovered based
on network advertisements using Router Advertisements <span>[<a href="#RFC4861" class="cite xref">RFC4861</a>]</span>. A network
defining its configuration via PvD information can include the <code>proxies</code>
key (<a href="#proxy-enumeration" class="auto internal xref">Section 3</a>) to inform clients of a list of proxies available
on the network.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">This association of proxies with the network's PvD can be used as a mechanism
to discover proxies, as an alternative to PAC files. However, client systems MUST
NOT automatically send traffic over proxies advertised in this way without
explicit configuration, policy, or user permission. For example, a client
can use this mechanism to choose between known proxies, such as if the client was
already proxying traffic and has multiple options to choose between.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">Further security and experience considerations are needed for these cases.<a href="#section-5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-considerations">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">The mechanisms in this document allow clients using a proxy to "upgrade" a configuration
for a cleartext HTTP/1.1 or SOCKS proxy into a configuration that uses TLS to communication to the proxy.
This upgrade can add protection to the proxied traffic so it is less observable by
entities along the network path; however it does not prevent the proxy itself from
observing the traffic being proxied.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Configuration advertised via PvD Additional Information, such DNS zones or associated
proxies, can only be safely used when fetched over a secure TLS-protected connection,
and the client has validated that that the hostname of the proxy, the identifier of
the PvD, and the validated hostname identity on the certificate all match.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">When using information in destination rules (<a href="#destinations" class="auto internal xref">Section 4</a>), clients MUST only allow
the PvD configuration to narrow the scope of traffic that they will send through a proxy.
Clients that are configured by policy to only send a particular set of traffic through
a particular proxy can learn about rules that will cause them to send more narrowly-scoped
traffic, but MUST NOT send traffic that would go beyond what is allowed by local policy.<a href="#section-6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="proxies-key-iana">
<section id="section-7.1">
        <h3 id="name-new-pvd-additional-informat">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-new-pvd-additional-informat" class="section-name selfRef">New PvD Additional Information key</a>
        </h3>
<p id="section-7.1-1">This document registers two new keys in the "Additional Information PvD Keys" registry.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<div id="proxies-key">
<section id="section-7.1.1">
          <h4 id="name-proxies-key">
<a href="#section-7.1.1" class="section-number selfRef">7.1.1. </a><a href="#name-proxies-key" class="section-name selfRef"><code>proxies</code> Key</a>
          </h4>
<p id="section-7.1.1-1">JSON Key: proxies<a href="#section-7.1.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1.1-2">Description: Array of proxy dictionaries associated with this PvD<a href="#section-7.1.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1.1-3">Type: Array of dictionaries<a href="#section-7.1.1-3" class="pilcrow">¶</a></p>
<p id="section-7.1.1-4">Example:<a href="#section-7.1.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1.1-5">
<pre>
[
 {
  "protocol": "connect-udp",
  "proxy": "https://proxy.example.org/masque{?target_host,target_port}"
 }
]
</pre><a href="#section-7.1.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="proxy-match-key">
<section id="section-7.1.2">
          <h4 id="name-proxy-match-key">
<a href="#section-7.1.2" class="section-number selfRef">7.1.2. </a><a href="#name-proxy-match-key" class="section-name selfRef"><code>proxy-match</code> Key</a>
          </h4>
<p id="section-7.1.2-1">JSON Key: proxy-match<a href="#section-7.1.2-1" class="pilcrow">¶</a></p>
<p id="section-7.1.2-2">Description: Array of proxy match rules, as dictionaries, associated with
entries in the <code>proxies</code> array.<a href="#section-7.1.2-2" class="pilcrow">¶</a></p>
<p id="section-7.1.2-3">Type: Array of dictionaries<a href="#section-7.1.2-3" class="pilcrow">¶</a></p>
<p id="section-7.1.2-4">Example:<a href="#section-7.1.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1.2-5">
<pre>
[
 {
  "domains": [ "*.internal.example.org" ],
  "proxies": [ "default_proxy" ]
 }
]
</pre><a href="#section-7.1.2-5" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="proxy-info-iana">
<section id="section-7.2">
        <h3 id="name-new-pvd-proxy-information-r">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-new-pvd-proxy-information-r" class="section-name selfRef">New PvD Proxy Information Registry</a>
        </h3>
<p id="section-7.2-1">IANA is requested to create a new registry "Proxy Information PvD Keys", within the "Provisioning Domains (PvDs)" registry page.
This new registry reserves JSON keys for use in sub-dictionaries under the <code>proxies</code> key.
The initial contents of this registry are given in <a href="#proxy-information-keys-table" class="auto internal xref">Table 1</a>.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">New assignments in the "Proxy Information PvD Keys" registry will be administered by IANA through Expert Review <span>[<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>.
Experts are requested to ensure that defined keys do not overlap in names or semantics, do not contain an underscore character ("_")
in the names (since underscores are reserved for vendor-specific keys), and have clear format definitions.
The reference and notes fields MAY be empty.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="proxy-protocol-iana">
<section id="section-7.3">
        <h3 id="name-new-pvd-proxy-protocol-regi">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-new-pvd-proxy-protocol-regi" class="section-name selfRef">New PvD Proxy Protocol Registry</a>
        </h3>
<p id="section-7.3-1">IANA is requested to create a new registry "Proxy Protocol PvD Values", within the "Provisioning Domains (PvDs)" registry page.
This new registry reserves JSON values for the <code>protocol</code> key in <code>proxies</code> sub-dictionaries.
The initial contents of this registry are given in <a href="#proxy-protocol-value-table" class="auto internal xref">Table 2</a>.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">New assignments in the "Proxy Protocol PvD Values" registry will be administered by IANA through Expert Review <span>[<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>.
Experts are requested to ensure that defined keys do not overlap in names. The reference and notes fields MAY be empty.<a href="#section-7.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="proxy-destination-iana">
<section id="section-7.4">
        <h3 id="name-new-pvd-proxy-destination-r">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-new-pvd-proxy-destination-r" class="section-name selfRef">New PvD Proxy Destination Rule Registry</a>
        </h3>
<p id="section-7.4-1">IANA is requested to create a new registry "Proxy Destination Rule PvD Keys", within the "Provisioning Domains (PvDs)" registry page.
This new registry reserves JSON keys for use in sub-dictionaries under the <code>proxy-match</code> key.
The initial contents of this registry are given in <a href="#destination-rule-keys-table" class="auto internal xref">Table 3</a>.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2">New assignments in the "Proxy Destination Rule PvD Keys" registry will be administered by IANA through Expert Review <span>[<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>.
Experts are requested to ensure that defined keys do not overlap in names or semantics, and do not contain an underscore character ("_")
in the names (since underscores are reserved for vendor-specific keys).<a href="#section-7.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="svcparamkey-iana">
<section id="section-7.5">
        <h3 id="name-new-dns-svcb-service-parame">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-new-dns-svcb-service-parame" class="section-name selfRef">New DNS SVCB Service Parameter Key (SvcParamKey)</a>
        </h3>
<p id="section-7.5-1">IANA is requested to add a new entry to the "DNS SVCB Service Parameter Keys (SvcParamKeys)" registry:<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.5-2.1">
            <p id="section-7.5-2.1.1">Number: TBD<a href="#section-7.5-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.5-2.2">
            <p id="section-7.5-2.2.1">Name: pvd<a href="#section-7.5-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.5-2.3">
            <p id="section-7.5-2.3.1">Meaning: PvD configuration is available at the well-known path<a href="#section-7.5-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.5-2.4">
            <p id="section-7.5-2.4.1">Change Controller: IETF<a href="#section-7.5-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.5-2.5">
            <p id="section-7.5-2.5.1">Reference: this document, <a href="#svcparamkey" class="auto internal xref">Section 2.1</a><a href="#section-7.5-2.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="ALPN">[ALPN]</dt>
        <dd>
<span class="refAuthor">Friedl, S.</span>, <span class="refAuthor">Popov, A.</span>, <span class="refAuthor">Langley, A.</span>, and <span class="refAuthor">E. Stephan</span>, <span class="refTitle">"Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension"</span>, <span class="seriesInfo">RFC 7301</span>, <span class="seriesInfo">DOI 10.17487/RFC7301</span>, <time datetime="2014-07" class="refDate">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7301">https://www.rfc-editor.org/rfc/rfc7301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CONNECT-IP">[CONNECT-IP]</dt>
        <dd>
<span class="refAuthor">Pauly, T., Ed.</span>, <span class="refAuthor">Schinazi, D.</span>, <span class="refAuthor">Chernyakhovsky, A.</span>, <span class="refAuthor">Kühlewind, M.</span>, and <span class="refAuthor">M. Westerlund</span>, <span class="refTitle">"Proxying IP in HTTP"</span>, <span class="seriesInfo">RFC 9484</span>, <span class="seriesInfo">DOI 10.17487/RFC9484</span>, <time datetime="2023-10" class="refDate">October 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9484">https://www.rfc-editor.org/rfc/rfc9484</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CONNECT-TCP">[CONNECT-TCP]</dt>
        <dd>
<span class="refAuthor">Schwartz, B. M.</span>, <span class="refTitle">"Template-Driven HTTP CONNECT Proxying for TCP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-connect-tcp-10</span>, <time datetime="2025-12-05" class="refDate">5 December 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-connect-tcp-10">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-connect-tcp-10</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CONNECT-UDP">[CONNECT-UDP]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span>, <span class="refTitle">"Proxying UDP in HTTP"</span>, <span class="seriesInfo">RFC 9298</span>, <span class="seriesInfo">DOI 10.17487/RFC9298</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9298">https://www.rfc-editor.org/rfc/rfc9298</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP">[HTTP]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="JSON">[JSON]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PVDDATA">[PVDDATA]</dt>
        <dd>
<span class="refAuthor">Pfister, P.</span>, <span class="refAuthor">Vyncke, É.</span>, <span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Schinazi, D.</span>, and <span class="refAuthor">W. Shao</span>, <span class="refTitle">"Discovering Provisioning Domain Names and Data"</span>, <span class="seriesInfo">RFC 8801</span>, <span class="seriesInfo">DOI 10.17487/RFC8801</span>, <time datetime="2020-07" class="refDate">July 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8801">https://www.rfc-editor.org/rfc/rfc8801</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06" class="refDate">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8126">https://www.rfc-editor.org/rfc/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SOCKSv5">[SOCKSv5]</dt>
        <dd>
<span class="refAuthor">Leech, M.</span>, <span class="refAuthor">Ganis, M.</span>, <span class="refAuthor">Lee, Y.</span>, <span class="refAuthor">Kuris, R.</span>, <span class="refAuthor">Koblas, D.</span>, and <span class="refAuthor">L. Jones</span>, <span class="refTitle">"SOCKS Protocol Version 5"</span>, <span class="seriesInfo">RFC 1928</span>, <span class="seriesInfo">DOI 10.17487/RFC1928</span>, <time datetime="1996-03" class="refDate">March 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1928">https://www.rfc-editor.org/rfc/rfc1928</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SVCB-DNS">[SVCB-DNS]</dt>
        <dd>
<span class="refAuthor">Schwartz, B.</span>, <span class="refAuthor">Bishop, M.</span>, and <span class="refAuthor">E. Nygren</span>, <span class="refTitle">"Service Binding and Parameter Specification via the DNS (SVCB and HTTPS Resource Records)"</span>, <span class="seriesInfo">RFC 9460</span>, <span class="seriesInfo">DOI 10.17487/RFC9460</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9460">https://www.rfc-editor.org/rfc/rfc9460</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="URI">[URI]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="URITEMPLATE">[URITEMPLATE]</dt>
      <dd>
<span class="refAuthor">Gregorio, J.</span>, <span class="refAuthor">Fielding, R.</span>, <span class="refAuthor">Hadley, M.</span>, <span class="refAuthor">Nottingham, M.</span>, and <span class="refAuthor">D. Orchard</span>, <span class="refTitle">"URI Template"</span>, <span class="seriesInfo">RFC 6570</span>, <span class="seriesInfo">DOI 10.17487/RFC6570</span>, <time datetime="2012-03" class="refDate">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6570">https://www.rfc-editor.org/rfc/rfc6570</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="CIDR">[CIDR]</dt>
        <dd>
<span class="refAuthor">Fuller, V.</span> and <span class="refAuthor">T. Li</span>, <span class="refTitle">"Classless Inter-domain Routing (CIDR): The Internet Address Assignment and Aggregation Plan"</span>, <span class="seriesInfo">BCP 122</span>, <span class="seriesInfo">RFC 4632</span>, <span class="seriesInfo">DOI 10.17487/RFC4632</span>, <time datetime="2006-08" class="refDate">August 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4632">https://www.rfc-editor.org/rfc/rfc4632</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IKEV2SPLIT">[IKEV2SPLIT]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span> and <span class="refAuthor">P. Wouters</span>, <span class="refTitle">"Split DNS Configuration for the Internet Key Exchange Protocol Version 2 (IKEv2)"</span>, <span class="seriesInfo">RFC 8598</span>, <span class="seriesInfo">DOI 10.17487/RFC8598</span>, <time datetime="2019-05" class="refDate">May 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8598">https://www.rfc-editor.org/rfc/rfc8598</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PVD">[PVD]</dt>
        <dd>
<span class="refAuthor">Anipko, D., Ed.</span>, <span class="refTitle">"Multiple Provisioning Domain Architecture"</span>, <span class="seriesInfo">RFC 7556</span>, <span class="seriesInfo">DOI 10.17487/RFC7556</span>, <time datetime="2015-06" class="refDate">June 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7556">https://www.rfc-editor.org/rfc/rfc7556</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3040">[RFC3040]</dt>
        <dd>
<span class="refAuthor">Cooper, I.</span>, <span class="refAuthor">Melve, I.</span>, and <span class="refAuthor">G. Tomlinson</span>, <span class="refTitle">"Internet Web Replication and Caching Taxonomy"</span>, <span class="seriesInfo">RFC 3040</span>, <span class="seriesInfo">DOI 10.17487/RFC3040</span>, <time datetime="2001-01" class="refDate">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3040">https://www.rfc-editor.org/rfc/rfc3040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4861">[RFC4861]</dt>
      <dd>
<span class="refAuthor">Narten, T.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Simpson, W.</span>, and <span class="refAuthor">H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4861">https://www.rfc-editor.org/rfc/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tommy Pauly</span></div>
<div dir="auto" class="left"><span class="org">Apple, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tpauly@apple.com" class="email">tpauly@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Dragana Damjanovic</span></div>
<div dir="auto" class="left"><span class="org">Microsoft</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ddamjanovic@microsoft.com" class="email">ddamjanovic@microsoft.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yaroslav Rosomakho</span></div>
<div dir="auto" class="left"><span class="org">Zscaler</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:yrosomakho@zscaler.com" class="email">yrosomakho@zscaler.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
